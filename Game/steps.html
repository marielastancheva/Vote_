<html>
<head>
 <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
	<link rel="stylesheet" type="text/css" href="style/steps.css" />
	<script type="text/javascript" src="scripts/states.js"></script>
			
</head>
<body>
<script>
function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) {
                return unescape(pair[1]);
            }
        }
    }
var cst=parseInt(getQueryVariable("cst")); cchall=0; csol=0;
var ch=getQueryVariable("ch");
</script>

	<div class="div1" style="height:5%"> 	
		<p>моята изборна реформа</p>
	</div>

	<div class"div2" style="height:40% border: 1px solid; padding: 10px; ">
		<p id="currentstep" name="currentstep"></p>			
		<h1><p id="currenttitle" name="currenttitle"></p></h1>
		<h3><p id="currentdescription" name="currentdescription"></p></h3>
		<h3><p>По време на този етап, се изправяш срещу тези 3 предизвикателства. За да продължиш към следващата стъпка, трябва да решиш поне едно от тях.</p></h3>
		<p><b>избери преизвикателство</b></p>
	</div>

	<div class="div3" style="height:40%">

		<div class="div31" style="float:left;"> 
		<p id="currentchallenge1" name="currentchallenge1"></p>
		<button id="solved1" class="stepbutton" onclick="chall(0)" type="button">нерешено</button>

		</div>
		<div class="div31" style="float:left;"> 
		<p id="currentchallenge2" name="currentchallenge2"></p>
		<button id="solved2" class="stepbutton" onclick="chall(1)" type="button">нерешено</button>
		</div>
		<div class="div31" style="float:left;"> 
		<p id="currentchallenge3" name="currentchallenge3"></p>
		<button id="solved3" class="stepbutton" onclick="chall(2)" type="button">нерешено</button>
		</div>

	</div>
	<script> 
			function staterefresh(){
				var n1 = ch.indexOf("9"+cst+0); 
				if (n1>=0) {document.getElementById("solved1").style.backgroundColor = "#6B7F00";
							document.getElementById("solved1").innerHTML="решено";} else {
							document.getElementById("solved1").style.backgroundColor = "#202020";
							document.getElementById("solved1").innerHTML="нерешено";
							}
				var n2 = ch.indexOf("9"+cst+1); 
				if (n2>=0) {document.getElementById("solved2").style.backgroundColor = "#6B7F00";
							document.getElementById("solved2").innerHTML="решено";} else {
							document.getElementById("solved2").style.backgroundColor = "#202020";
							document.getElementById("solved2").innerHTML="нерешено";
							}
				var n3 = ch.indexOf("9"+cst+2); 
				if (n3>=0) {document.getElementById("solved3").style.backgroundColor = "#6B7F00";
							document.getElementById("solved3").innerHTML="решено";} else {
							document.getElementById("solved3").style.backgroundColor = "#202020";
							document.getElementById("solved3").innerHTML="нерешено";
							}
				document.getElementById("currentstep").innerHTML = "стъпка "+cst;
				document.getElementById("currenttitle").innerHTML = stategametitle(cst);
				document.getElementById("currentdescription").innerHTML = stategamedescription(cst);
				document.getElementById("currentchallenge1").innerHTML = stategamechall(cst,0);
				document.getElementById("currentchallenge2").innerHTML = stategamechall(cst,1);
				document.getElementById("currentchallenge3").innerHTML = stategamechall(cst,2);
				
			}
			staterefresh();
			function stepback() { 
				if (cst>0) {cst=cst-1}; 
				staterefresh();

			} 
			function stepnext() { 
				if(cst<6) {cst=cst+1};
				staterefresh();
			} 
			function chall(c){
            window.location.replace("challenges.html?cst="+cst+"&chall="+c+"&ch="+ch);

			}
	</script> 
	<div class="div4" style="height:10%">
		<button onclick="stepback()" type="button" style="float: left;">предишна стъпка</button>
		<button onclick="stepnext()" type="button" style="float: right;">следваща стъпка</button>
	</div>
</body>
</html>